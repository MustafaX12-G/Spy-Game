<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ - Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø§Ù„Ø´Ø§Ù…Ù„Ø©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap');
        body { font-family: 'Cairo', sans-serif; background-color: #0b0f19; color: #f8fafc; user-select: none; overflow-x: hidden; }
        .glass-panel { background: rgba(20, 27, 45, 0.95); border: 1px solid rgba(45, 212, 191, 0.2); border-radius: 24px; }
        .btn-cyan { background: #2dd4bf; color: #0b0f19; transition: transform 0.1s; }
        .btn-cyan:active { transform: scale(0.95); }
        .btn-dark { background: #1f2937; color: #fff; transition: transform 0.1s; border: 1px solid #374151; }
        .btn-dark:active { transform: scale(0.95); }
        .hidden-view { display: none !important; }
        .icon-massive { font-size: 140px; text-shadow: 0 10px 20px rgba(0,0,0,0.5); }
        .spy-mask { filter: drop-shadow(0 0 15px rgba(255,255,255,0.3)); }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">

    <div id="setup-screen" class="w-full max-w-md glass-panel p-6 text-center shadow-2xl">
        <i class="fa-solid fa-user-secret text-6xl text-white mb-4 spy-mask"></i>
        <h1 class="text-3xl font-black mb-6 text-white">Ø§Ù„Ø¬Ø§Ø³ÙˆØ³</h1>
        
        <div id="scoresContainer" class="bg-gray-900 rounded-xl p-3 mb-6 border border-gray-800 flex flex-wrap justify-center gap-2 text-sm font-bold"></div>

        <div class="mb-4 bg-gray-900 p-4 rounded-xl border border-gray-800">
            <label class="block text-sm mb-3 font-bold text-[#2dd4bf]">Ø¹Ø¯Ø¯ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† (3 - 10)</label>
            <div class="flex justify-center items-center gap-6">
                <button onclick="changeSettings('players', -1)" class="btn-dark w-12 h-12 rounded-lg text-2xl font-bold">-</button>
                <span id="playerCount" class="text-3xl font-black w-12 text-white">4</span>
                <button onclick="changeSettings('players', 1)" class="btn-dark w-12 h-12 rounded-lg text-2xl font-bold">+</button>
            </div>
        </div>

        <div class="mb-4 bg-gray-900 p-4 rounded-xl border border-gray-800">
            <label class="block text-sm mb-3 font-bold text-[#2dd4bf]">Ø¹Ø¯Ø¯ Ø§Ù„Ø¬ÙˆØ§Ø³ÙŠØ³ (1 - 3)</label>
            <div class="flex justify-center items-center gap-6">
                <button onclick="changeSettings('spies', -1)" class="btn-dark w-12 h-12 rounded-lg text-2xl font-bold">-</button>
                <span id="spyCount" class="text-3xl font-black w-12 text-white">1</span>
                <button onclick="changeSettings('spies', 1)" class="btn-dark w-12 h-12 rounded-lg text-2xl font-bold">+</button>
            </div>
        </div>

        <div class="mb-6 bg-gray-900 p-4 rounded-xl border border-gray-800">
            <label class="block text-sm mb-3 font-bold text-[#2dd4bf]">ÙˆÙ‚Øª Ø§Ù„Ø¬ÙˆÙ„Ø©</label>
            <div class="grid grid-cols-4 gap-2">
                <button onclick="setTimerOption(3)" id="btn-t-3" class="btn-dark py-2 rounded-lg font-bold">3 Ø¯</button>
                <button onclick="setTimerOption(5)" id="btn-t-5" class="btn-cyan py-2 rounded-lg font-bold">5 Ø¯</button>
                <button onclick="setTimerOption(7)" id="btn-t-7" class="btn-dark py-2 rounded-lg font-bold">7 Ø¯</button>
                <button onclick="setTimerOption(10)" id="btn-t-10" class="btn-dark py-2 rounded-lg font-bold">10 Ø¯</button>
            </div>
        </div>

        <button onclick="showCategories()" class="btn-cyan w-full py-4 rounded-xl text-xl font-black">Ø§Ù„ØªØ§Ù„ÙŠ</button>
    </div>

    <div id="category-screen" class="w-full max-w-md glass-panel p-6 text-center shadow-2xl hidden-view">
        <h2 class="text-2xl font-black mb-6 text-[#2dd4bf]">Ø§Ø®ØªØ± Ø§Ù„Ù…Ù‡Ù…Ø©</h2>
        
        <button onclick="startGame('Ø¹Ø´ÙˆØ§Ø¦ÙŠ')" class="bg-indigo-900 border border-indigo-500 text-white w-full py-4 rounded-xl text-lg font-bold mb-4 flex items-center justify-center gap-3 transition-transform active:scale-95">
            <i class="fa-solid fa-dice text-2xl"></i> Ø®Ù„Ø· Ø¹Ø´ÙˆØ§Ø¦ÙŠ
        </button>

        <div class="grid grid-cols-2 gap-3" id="categories-container"></div>
        <button onclick="switchScreen('category-screen', 'setup-screen')" class="mt-6 text-gray-400 font-bold hover:text-white">ğŸ”™ Ø¹ÙˆØ¯Ø©</button>
    </div>

    <div id="pass-screen" class="w-full max-w-md p-6 text-center hidden-view flex flex-col justify-center min-h-[500px]">
        <h2 class="text-xl font-bold mb-2 text-[#2dd4bf]">Ø§Ù„Ù„Ø§Ø¹Ø¨ <span id="currentPlayerNumDisplay">1</span> Ù…Ù† <span id="totalPlayersDisplay">4</span></h2>
        <div class="flex-grow flex items-center justify-center">
            <button onclick="showCard()" class="btn-cyan w-full py-5 rounded-xl text-2xl font-black shadow-lg">Ø±Ø¤ÙŠØ© Ø¨Ø·Ø§Ù‚ØªÙŠ</button>
        </div>
    </div>

    <div id="card-screen" class="w-full max-w-md p-6 text-center hidden-view flex flex-col items-center justify-center min-h-[500px]">
        <div id="cardContent" class="w-full flex-grow flex flex-col items-center justify-center"></div>
        <button onclick="hideCard()" class="btn-cyan w-full py-4 rounded-xl text-xl font-black mt-8">Ø£Ø®ÙÙ ÙˆÙ…Ø±Ø±</button>
    </div>

    <div id="timer-screen" class="w-full max-w-md glass-panel p-6 text-center shadow-2xl hidden-view">
        <div class="bg-gray-900 p-4 rounded-xl mb-6 border border-gray-800">
            <h2 class="text-sm font-bold mb-2 text-gray-400">Ø§Ù„Ø°ÙŠ ÙŠØ¨Ø¯Ø£ Ø¨Ø§Ù„Ø³Ø¤Ø§Ù„:</h2>
            <div id="starterPlayerNum" class="text-3xl font-black text-[#2dd4bf]">Ø§Ù„Ù„Ø§Ø¹Ø¨ 1</div>
        </div>
        
        <div class="text-7xl font-black text-white mb-8 font-mono" id="timerDisplay">05:00</div>
        
        <div class="grid grid-cols-2 gap-4">
            <button onclick="toggleTimer()" id="pauseBtn" class="btn-dark p-4 rounded-xl font-bold text-lg">Ø¥ÙŠÙ‚Ø§Ù â¸ï¸</button>
            <button onclick="goToVoting()" class="bg-red-600 text-white p-4 rounded-xl font-bold text-lg transition-transform active:scale-95">Ø¥Ù†Ù‡Ø§Ø¡ ÙˆØªØµÙˆÙŠØª</button>
        </div>
    </div>

    <div id="voting-screen" class="w-full max-w-md glass-panel p-6 text-center shadow-2xl hidden-view">
        <h2 class="text-2xl font-black mb-2 text-[#2dd4bf]">ÙˆÙ‚Øª Ø§Ù„ØªØµÙˆÙŠØª!</h2>
        <p class="text-gray-400 mb-6 text-sm">ØµÙˆØªÙˆØ§ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ù…Ø´ØªØ¨Ù‡ Ø¨Ù‡</p>
        <div id="voting-buttons" class="grid grid-cols-2 gap-3 mb-6"></div>
    </div>

    <div id="result-screen" class="w-full max-w-md glass-panel p-6 text-center shadow-2xl hidden-view">
        <i id="result-icon" class="fa-solid text-7xl mb-4"></i>
        <h2 id="result-title" class="text-3xl font-black mb-2"></h2>
        <p id="result-desc" class="text-lg text-gray-300 font-bold mb-6"></p>
        <div class="bg-gray-900 p-4 rounded-xl mb-8 border border-gray-800 text-center" id="spies-reveal"></div>
        <button onclick="resetForNextRound()" class="btn-cyan w-full py-4 rounded-xl text-xl font-black">Ø¨Ø¯Ø¡ Ø¬ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
    </div>

    <script>
        // Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø§Ù…Ù„Ø©
        const database = {
            "Ø·Ø¹Ø§Ù…": { icon: "fa-burger", words: [
                {n:"Ø´ÙˆØ±Ø¨Ø©", i:"fa-bowl-food"}, {n:"Ø¨ÙŠØªØ²Ø§", i:"fa-pizza-slice"}, {n:"Ø¨Ø±Ø¬Ø±", i:"fa-burger"}, 
                {n:"Ø¢ÙŠØ³ ÙƒØ±ÙŠÙ…", i:"fa-ice-cream"}, {n:"ØªÙØ§Ø­", i:"fa-apple-whole"}, {n:"Ø¬Ø¨Ù†", i:"fa-cheese"}, 
                {n:"Ù‚Ù‡ÙˆØ©", i:"fa-mug-hot"}, {n:"ÙƒÙŠÙƒ", i:"fa-cake-candles"}, {n:"Ù„Ø­Ù… Ù…Ø´ÙˆÙŠ", i:"fa-bone"}, 
                {n:"Ø³Ù…ÙƒØ©", i:"fa-fish"}, {n:"Ø¬Ø²Ø±", i:"fa-carrot"}, {n:"Ù„ÙŠÙ…ÙˆÙ†", i:"fa-lemon"},
                {n:"Ù‡ÙˆØª Ø¯ÙˆØ¬", i:"fa-hotdog"}, {n:"Ø¨ÙŠØ¶Ø©", i:"fa-egg"}, {n:"Ø®Ø¨Ø²", i:"fa-bread-slice"}, 
                {n:"Ø£Ø±Ø²", i:"fa-bowl-rice"}, {n:"Ø¯Ø¬Ø§Ø¬ Ù…Ù‚Ù„ÙŠ", i:"fa-drumstick-bite"}, {n:"Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©", i:"fa-cookie"},
                {n:"ÙØ±Ø§ÙˆÙ„Ø©", i:"fa-leaf"}, {n:"Ù…ÙˆØ²", i:"fa-lemon"}, {n:"Ø¨Ø·ÙŠØ®", i:"fa-lemon"}, 
                {n:"Ø¹Ù†Ø¨", i:"fa-leaf"}, {n:"Ø·Ù…Ø§Ø·Ù…", i:"fa-apple-whole"}, {n:"Ø¨Ø·Ø§Ø·Ø§", i:"fa-seedling"},
                {n:"Ø¨ØµÙ„", i:"fa-seedling"}, {n:"Ø´Ø§ÙŠ", i:"fa-mug-saucer"}, {n:"Ø¹ØµÙŠØ±", i:"fa-glass-water"}, 
                {n:"Ø­Ù„ÙŠØ¨", i:"fa-jug-detergent"}, {n:"Ø³Ù„Ø·Ø©", i:"fa-leaf"}, {n:"Ø¨Ø³ÙƒÙˆÙŠØª", i:"fa-cookie-bite"},
                {n:"ÙƒØ¨Ø§Ø¨", i:"fa-utensils"}, {n:"Ø´Ø§ÙˆØ±Ù…Ø§", i:"fa-utensils"}, {n:"ÙØ·ÙŠØ±Ø©", i:"fa-pie-chart"}, 
                {n:"Ø³ÙˆØ´ÙŠ", i:"fa-fish-fins"}, {n:"Ù…ÙƒØ±ÙˆÙ†Ø©", i:"fa-bowl-food"}, {n:"Ø¯ÙˆÙ†Ø§Øª", i:"fa-circle-notch"},
                {n:"Ø¹Ø³Ù„", i:"fa-jar"}, {n:"Ù…ÙƒØ³Ø±Ø§Øª", i:"fa-seedling"}, {n:"ØªÙ…Ø±", i:"fa-seedling"}, {n:"Ø´ÙŠØ¨Ø³", i:"fa-bag-shopping"}
            ]},
            "Ø£Ø´ÙŠØ§Ø¡": { icon: "fa-box-open", words: [
                {n:"Ù…Ø·Ø±Ù‚Ø©", i:"fa-hammer"}, {n:"Ù…ÙÙƒ", i:"fa-screwdriver"}, {n:"Ù…ÙØªØ§Ø­", i:"fa-key"}, 
                {n:"Ù‚ÙÙ„", i:"fa-lock"}, {n:"Ù†Ø¸Ø§Ø±Ø§Øª", i:"fa-glasses"}, {n:"Ø­Ù‚ÙŠØ¨Ø©", i:"fa-suitcase"}, 
                {n:"ÙƒØ§Ù…ÙŠØ±Ø§", i:"fa-camera"}, {n:"ØªÙ„ÙØ²ÙŠÙˆÙ†", i:"fa-tv"}, {n:"Ù„Ø§Ø¨ØªÙˆØ¨", i:"fa-laptop"}, 
                {n:"Ù‚Ù„Ù…", i:"fa-pen"}, {n:"Ù…Ù‚Øµ", i:"fa-scissors"}, {n:"Ù…Ù„Ø¹Ù‚Ø©", i:"fa-spoon"},
                {n:"Ø³ÙƒÙŠÙ†", i:"fa-utensils"}, {n:"Ø³Ø±ÙŠØ±", i:"fa-bed"}, {n:"ÙƒØ±Ø³ÙŠ", i:"fa-chair"}, 
                {n:"Ø·Ø§ÙˆÙ„Ø©", i:"fa-table"}, {n:"Ø¨Ø§Ø¨", i:"fa-door-closed"}, {n:"Ù†Ø§ÙØ°Ø©", i:"fa-border-all"},
                {n:"ÙƒØªØ§Ø¨", i:"fa-book"}, {n:"Ø¯ÙØªØ±", i:"fa-book-open"}, {n:"Ù‡Ø§ØªÙ", i:"fa-mobile"}, 
                {n:"Ø³Ø§Ø¹Ø© ÙŠØ¯", i:"fa-clock"}, {n:"Ø³Ø§Ø¹Ø© Ø­Ø§Ø¦Ø·", i:"fa-stopwatch"}, {n:"Ù…Ø¸Ù„Ø©", i:"fa-umbrella"},
                {n:"Ù…Ø­ÙØ¸Ø©", i:"fa-wallet"}, {n:"ÙƒÙŠØ³", i:"fa-bag-shopping"}, {n:"Ø­Ø°Ø§Ø¡", i:"fa-shoe-prints"}, 
                {n:"Ù‚Ù…ÙŠØµ", i:"fa-shirt"}, {n:"Ø¨Ù†Ø·Ø§Ù„", i:"fa-user-tie"}, {n:"Ù‚Ø¨Ø¹Ø©", i:"fa-hat-cowboy"},
                {n:"ÙØ±Ø´Ø§Ø©", i:"fa-brush"}, {n:"Ù…Ø´Ø·", i:"fa-teeth"}, {n:"Ù…Ø±Ø¢Ø©", i:"fa-circle"}, 
                {n:"Ù…ØµØ¨Ø§Ø­", i:"fa-lightbulb"}, {n:"Ù…ØµØ¨Ø§Ø­ ÙŠØ¯ÙˆÙŠ", i:"fa-flashlight"}, {n:"Ø¨Ø·Ø§Ø±ÙŠØ©", i:"fa-battery-full"},
                {n:"Ø´Ø§Ø­Ù†", i:"fa-plug"}, {n:"Ø³Ù…Ø§Ø¹Ø§Øª", i:"fa-headphones"}, {n:"Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ†", i:"fa-microphone"}, {n:"Ø¬ÙŠØªØ§Ø±", i:"fa-guitar"}
            ]},
            "Ø£Ù…Ø§ÙƒÙ†": { icon: "fa-earth-americas", words: [
                {n:"Ù…Ø³ØªØ´ÙÙ‰", i:"fa-hospital"}, {n:"Ù…Ø¯Ø±Ø³Ø©", i:"fa-school"}, {n:"Ù…Ø·Ø§Ø±", i:"fa-plane-departure"}, 
                {n:"ÙÙ†Ø¯Ù‚", i:"fa-hotel"}, {n:"Ù…Ø³Ø¬Ø¯", i:"fa-mosque"}, {n:"Ù…Ø®ÙŠÙ…", i:"fa-campground"}, 
                {n:"Ù…Ø¯ÙŠÙ†Ø©", i:"fa-city"}, {n:"Ù…Ù†Ø²Ù„", i:"fa-house"}, {n:"Ù…Ø¨Ù†Ù‰", i:"fa-building"},
                {n:"Ù…Ù‚Ù‡Ù‰", i:"fa-mug-saucer"}, {n:"Ù…Ø·Ø¹Ù…", i:"fa-utensils"}, {n:"Ø¬Ø§Ù…Ø¹Ø©", i:"fa-graduation-cap"},
                {n:"Ù…ÙƒØªØ¨Ø©", i:"fa-book-reader"}, {n:"Ø­Ø¯ÙŠÙ‚Ø©", i:"fa-tree"}, {n:"Ø´Ø§Ø·Ø¦", i:"fa-umbrella-beach"}, 
                {n:"Ø¬Ø¨Ù„", i:"fa-mountain"}, {n:"ØµØ­Ø±Ø§Ø¡", i:"fa-sun"}, {n:"Ø¬Ø²ÙŠØ±Ø©", i:"fa-water"},
                {n:"Ø¨Ø­Ø±", i:"fa-water"}, {n:"Ù†Ù‡Ø±", i:"fa-water"}, {n:"Ø´Ø§Ø±Ø¹", i:"fa-road"}, 
                {n:"Ø¬Ø³Ø±", i:"fa-bridge"}, {n:"Ù…Ø­Ø·Ø© Ø­Ø§ÙÙ„Ø§Øª", i:"fa-bus"}, {n:"Ù…Ø­Ø·Ø© Ù‚Ø·Ø§Ø±", i:"fa-train"},
                {n:"Ù…ÙˆÙ„", i:"fa-shop"}, {n:"Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª", i:"fa-cart-shopping"}, {n:"ØµÙŠØ¯Ù„ÙŠØ©", i:"fa-prescription-bottle-medical"}, 
                {n:"Ø¨Ù†Ùƒ", i:"fa-building-columns"}, {n:"Ø¨Ø±ÙŠØ¯", i:"fa-envelope"}, {n:"Ù…Ø±ÙƒØ² Ø´Ø±Ø·Ø©", i:"fa-building-shield"},
                {n:"Ù…Ø­Ø·Ø© Ø¥Ø·ÙØ§Ø¡", i:"fa-fire-extinguisher"}, {n:"Ù…Ø­ÙƒÙ…Ø©", i:"fa-scale-balanced"}, {n:"Ø³Ø¬Ù†", i:"fa-dungeon"}, 
                {n:"Ù…Ù„Ø¹Ø¨", i:"fa-futbol"}, {n:"Ù†Ø§Ø¯ÙŠ Ø±ÙŠØ§Ø¶ÙŠ", i:"fa-dumbbell"}, {n:"Ù…ØªØ­Ù", i:"fa-building-columns"},
                {n:"Ù…Ø³Ø±Ø­", i:"fa-masks-theater"}, {n:"Ø³ÙŠÙ†Ù…Ø§", i:"fa-film"}, {n:"Ù…Ø®Ø¨Ø²", i:"fa-shop"}, {n:"Ù…ØµÙ†Ø¹", i:"fa-industry"}
            ]},
            "ÙˆØ¸Ø§Ø¦Ù": { icon: "fa-briefcase", words: [
                {n:"Ø·Ø¨ÙŠØ¨", i:"fa-user-doctor"}, {n:"Ø´Ø±Ø·ÙŠ", i:"fa-user-shield"}, {n:"Ø±Ø§Ø¦Ø¯ ÙØ¶Ø§Ø¡", i:"fa-user-astronaut"}, 
                {n:"Ù…Ø­Ù‚Ù‚", i:"fa-user-secret"}, {n:"Ù…Ù…Ø±Ø¶Ø©", i:"fa-user-nurse"}, {n:"Ù‚Ø§Ø¶ÙŠ", i:"fa-gavel"},
                {n:"Ø·Ø¨Ø§Ø®", i:"fa-utensils"}, {n:"Ø¹Ø§Ù„Ù…", i:"fa-flask"}, {n:"Ù…Ø¹Ù„Ù…", i:"fa-chalkboard-user"},
                {n:"Ø·Ø§Ù„Ø¨", i:"fa-user-graduate"}, {n:"Ù…Ù‡Ù†Ø¯Ø³", i:"fa-helmet-safety"}, {n:"Ù…Ø¨Ø±Ù…Ø¬", i:"fa-laptop-code"},
                {n:"Ù…ØµÙ…Ù…", i:"fa-pen-nib"}, {n:"Ø±Ø³Ø§Ù…", i:"fa-palette"}, {n:"Ù…ÙˆØ³ÙŠÙ‚ÙŠ", i:"fa-music"}, 
                {n:"ÙƒØ§ØªØ¨", i:"fa-pen-fancy"}, {n:"ØµØ­ÙÙŠ", i:"fa-newspaper"}, {n:"Ù…ØµÙˆØ±", i:"fa-camera"},
                {n:"Ù…Ø²Ø§Ø±Ø¹", i:"fa-tractor"}, {n:"Ø·ÙŠØ§Ø±", i:"fa-plane"}, {n:"Ø³Ø§Ø¦Ù‚", i:"fa-car"}, 
                {n:"Ø¨Ø­Ø§Ø±", i:"fa-ship"}, {n:"Ø¬Ù†Ø¯ÙŠ", i:"fa-person-military-rifle"}, {n:"Ø¥Ø·ÙØ§Ø¦ÙŠ", i:"fa-fire-extinguisher"},
                {n:"Ù…Ø­Ø§Ù…ÙŠ", i:"fa-scale-balanced"}, {n:"Ù…Ø­Ø§Ø³Ø¨", i:"fa-calculator"}, {n:"Ù…ÙˆØ¸Ù Ø¨Ù†Ùƒ", i:"fa-money-bill"}, 
                {n:"Ù…Ø­Ø§Ø³Ø¨ Ù…ØªØ¬Ø±", i:"fa-cash-register"}, {n:"Ø¨Ø§Ø¦Ø¹", i:"fa-shop"}, {n:"Ø­Ù„Ø§Ù‚", i:"fa-scissors"},
                {n:"Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠ", i:"fa-wrench"}, {n:"Ø³Ø¨Ø§Ùƒ", i:"fa-wrench"}, {n:"Ù†Ø¬Ø§Ø±", i:"fa-hammer"}, 
                {n:"ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ", i:"fa-plug"}, {n:"Ø¹Ø§Ù…Ù„ Ù†Ø¸Ø§ÙØ©", i:"fa-broom"}, {n:"Ø­Ø§Ø±Ø³", i:"fa-shield"},
                {n:"Ø±ÙŠØ§Ø¶ÙŠ", i:"fa-person-running"}, {n:"Ù…Ù…Ø«Ù„", i:"fa-masks-theater"}, {n:"Ù…Ø®Ø±Ø¬", i:"fa-clapperboard"}, {n:"Ø³ÙŠØ§Ø³ÙŠ", i:"fa-bullhorn"}
            ]},
            "Ø­ÙŠÙˆØ§Ù†Ø§Øª": { icon: "fa-paw", words: [
                {n:"Ù‚Ø·Ø©", i:"fa-cat"}, {n:"ÙƒÙ„Ø¨", i:"fa-dog"}, {n:"Ø­ØµØ§Ù†", i:"fa-horse"}, 
                {n:"Ø¶ÙØ¯Ø¹", i:"fa-frog"}, {n:"ØºØ±Ø§Ø¨", i:"fa-crow"}, {n:"Ø¹Ù†ÙƒØ¨ÙˆØª", i:"fa-spider"},
                {n:"Ø¨Ù‚Ø±Ø©", i:"fa-cow"}, {n:"Ø­Ø´Ø±Ø©", i:"fa-bug"}, {n:"Ø³Ù…ÙƒØ©", i:"fa-fish"}, 
                {n:"Ø­Ù…Ø§Ù…Ø©", i:"fa-dove"}, {n:"ØªÙ†ÙŠÙ†", i:"fa-dragon"}, {n:"ÙØ±Ø³ Ø§Ù„Ù†Ù‡Ø±", i:"fa-hippo"},
                {n:"Ù‚Ù†Ø¯Ø³", i:"fa-otter"}, {n:"Ø¯ÙˆØ¯Ø©", i:"fa-worm"}, {n:"Ø·Ø§Ø¦Ø± Ø§Ù„ÙƒÙŠÙˆÙŠ", i:"fa-kiwi-bird"}, 
                {n:"Ø£Ø³Ø¯", i:"fa-paw"}, {n:"Ù†Ù…Ø±", i:"fa-paw"}, {n:"ÙÙŠÙ„", i:"fa-paw"},
                {n:"Ù‚Ø±Ø¯", i:"fa-paw"}, {n:"Ø¯Ø¨", i:"fa-paw"}, {n:"Ø°Ø¦Ø¨", i:"fa-paw"}, 
                {n:"Ø«Ø¹Ù„Ø¨", i:"fa-paw"}, {n:"ØºØ²Ø§Ù„", i:"fa-paw"}, {n:"Ø£Ø±Ù†Ø¨", i:"fa-paw"},
                {n:"ÙØ£Ø±", i:"fa-paw"}, {n:"Ø®ÙØ§Ø´", i:"fa-paw"}, {n:"Ø®Ù†Ø²ÙŠØ±", i:"fa-piggy-bank"}, 
                {n:"Ø®Ø±ÙˆÙ", i:"fa-paw"}, {n:"Ù…Ø§Ø¹Ø²", i:"fa-paw"}, {n:"Ø¯Ø¬Ø§Ø¬Ø©", i:"fa-paw"},
                {n:"Ø¨Ø·Ø©", i:"fa-paw"}, {n:"Ù†Ø³Ø±", i:"fa-paw"}, {n:"Ø¨ÙˆÙ…Ø©", i:"fa-paw"}, 
                {n:"Ø¨Ø¨ØºØ§Ø¡", i:"fa-paw"}, {n:"Ø¨Ø·Ø±ÙŠÙ‚", i:"fa-paw"}, {n:"Ø«Ø¹Ø¨Ø§Ù†", i:"fa-paw"},
                {n:"Ø³Ù„Ø­ÙØ§Ø©", i:"fa-paw"}, {n:"Ù‚Ø±Ø´", i:"fa-fish"}, {n:"Ø­ÙˆØª", i:"fa-fish"}, {n:"Ø¯Ù„ÙÙŠÙ†", i:"fa-fish"}
            ]},
            "Ø±ÙŠØ§Ø¶Ø©": { icon: "fa-futbol", words: [
                {n:"ÙƒØ±Ø© Ù‚Ø¯Ù…", i:"fa-futbol"}, {n:"ÙƒØ±Ø© Ø³Ù„Ø©", i:"fa-basketball"}, {n:"ØªÙ†Ø³", i:"fa-table-tennis-paddle-ball"}, 
                {n:"Ø¨ÙˆÙ„ÙŠÙ†Ø¬", i:"fa-bowling-ball"}, {n:"ØªØ²Ù„Ø¬", i:"fa-person-skating"}, {n:"Ø³Ø¨Ø§Ø­Ø©", i:"fa-person-swimming"},
                {n:"Ø±ÙƒØ¶", i:"fa-person-running"}, {n:"Ø¯Ø±Ø§Ø¬Ø§Øª", i:"fa-person-biking"}, {n:"ØªØ²Ù„Ø¬ Ø¬Ù„ÙŠØ¯", i:"fa-person-skiing"}, 
                {n:"ØªØ²Ù„Ø¬ Ù„ÙˆØ­", i:"fa-person-snowboarding"}, {n:"ÙƒØ±Ø© Ø·Ø§Ø¦Ø±Ø©", i:"fa-volleyball"}, {n:"Ø¨ÙŠØ³Ø¨ÙˆÙ„", i:"fa-baseball"},
                {n:"Ø±Ø¬Ø¨ÙŠ", i:"fa-football"}, {n:"Ø¬ÙˆÙ„Ù", i:"fa-golf-ball-tee"}, {n:"Ù…Ù„Ø§ÙƒÙ…Ø©", i:"fa-hand-back-fist"}, 
                {n:"Ù…ØµØ§Ø±Ø¹Ø©", i:"fa-hand-back-fist"}, {n:"ÙƒØ§Ø±Ø§ØªÙŠÙ‡", i:"fa-user-ninja"}, {n:"Ø¬ÙˆØ¯Ùˆ", i:"fa-user-ninja"},
                {n:"ØªØ§ÙŠÙƒÙˆÙ†Ø¯Ùˆ", i:"fa-user-ninja"}, {n:"Ù…Ø¨Ø§Ø±Ø²Ø©", i:"fa-khanda"}, {n:"Ø±Ù…Ø§ÙŠØ© Ø£Ø³Ù‡Ù…", i:"fa-bullseye"}, 
                {n:"Ø±Ù…Ø§ÙŠØ© Ø¨Ù†Ø§Ø¯Ù‚", i:"fa-crosshairs"}, {n:"Ø±ÙØ¹ Ø£Ø«Ù‚Ø§Ù„", i:"fa-dumbbell"}, {n:"Ø¬Ù…Ø¨Ø§Ø²", i:"fa-child-reaching"},
                {n:"ØºØ·Ø³", i:"fa-person-swimming"}, {n:"ØªØ¬Ø¯ÙŠÙ", i:"fa-sailboat"}, {n:"Ø´Ø±Ø§Ø¹", i:"fa-sailboat"}, 
                {n:"Ø±ÙƒÙˆØ¨ Ø£Ù…ÙˆØ§Ø¬", i:"fa-water"}, {n:"ÙØ±ÙˆØ³ÙŠØ©", i:"fa-horse"}, {n:"Ø³Ø¨Ø§Ù‚ Ø³ÙŠØ§Ø±Ø§Øª", i:"fa-car-side"},
                {n:"Ø³Ø¨Ø§Ù‚ Ø¯Ø±Ø§Ø¬Ø§Øª Ù†Ø§Ø±ÙŠØ©", i:"fa-motorcycle"}, {n:"Ø¨Ù„ÙŠØ§Ø±Ø¯Ùˆ", i:"fa-circle"}, {n:"Ø³Ù†ÙˆÙƒØ±", i:"fa-circle"}, 
                {n:"Ø±Ù…ÙŠ Ø§Ù„Ø³Ù‡Ø§Ù…", i:"fa-bullseye"}, {n:"ØªÙ†Ø³ Ø·Ø§ÙˆÙ„Ø©", i:"fa-table-tennis-paddle-ball"}, {n:"Ø±ÙŠØ´Ø© Ø·Ø§Ø¦Ø±Ø©", i:"fa-table-tennis-paddle-ball"},
                {n:"Ø§Ø³ÙƒÙˆØ§Ø´", i:"fa-table-tennis-paddle-ball"}, {n:"Ù‡ÙˆÙƒÙŠ", i:"fa-hockey-puck"}, {n:"Ù‡ÙˆÙƒÙŠ Ø¬Ù„ÙŠØ¯", i:"fa-hockey-puck"}, {n:"ÙƒØ±ÙŠÙƒØª", i:"fa-baseball"}
            ]},
            "ØªØ·Ø¨ÙŠÙ‚Ø§Øª": { icon: "fa-mobile-screen", words: [
                {n:"Ù…Ø±Ø§Ø³Ù„Ø©", i:"fa-comment-dots"}, {n:"Ø®Ø±Ø§Ø¦Ø·", i:"fa-map-location-dot"}, {n:"Ù…ØªØµÙØ­", i:"fa-globe"}, 
                {n:"ØªÙ‚ÙˆÙŠÙ…", i:"fa-calendar-days"}, {n:"Ø­Ø§Ø³Ø¨Ø©", i:"fa-calculator"}, {n:"Ù…ÙˆØ³ÙŠÙ‚Ù‰", i:"fa-music"},
                {n:"ÙƒØ§Ù…ÙŠØ±Ø§", i:"fa-camera"}, {n:"ØµÙˆØ±", i:"fa-image"}, {n:"Ø³Ø§Ø¹Ø©", i:"fa-clock"}, 
                {n:"Ø·Ù‚Ø³", i:"fa-cloud-sun"}, {n:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª", i:"fa-note-sticky"}, {n:"ØªØ°ÙƒÙŠØ±Ø§Øª", i:"fa-bell"},
                {n:"Ù…Ø­ÙØ¸Ø©", i:"fa-wallet"}, {n:"Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª", i:"fa-gear"}, {n:"Ù…ØªØ¬Ø± ØªØ·Ø¨ÙŠÙ‚Ø§Øª", i:"fa-shop"}, 
                {n:"ØªØ¹Ø§Ø±Ù", i:"fa-heart"}, {n:"Ù„ØºØ§Øª", i:"fa-language"}, {n:"ØªÙˆØµÙŠÙ„ Ø·Ø¹Ø§Ù…", i:"fa-burger"},
                {n:"Ù„ÙŠØ§Ù‚Ø©", i:"fa-dumbbell"}, {n:"Ø£Ø®Ø¨Ø§Ø±", i:"fa-newspaper"}, {n:"ÙƒØªØ¨", i:"fa-book"}, 
                {n:"Ø¨ÙˆØ¯ÙƒØ§Ø³Øª", i:"fa-podcast"}, {n:"Ø£Ù„Ø¹Ø§Ø¨", i:"fa-gamepad"}, {n:"Ø­Ù…Ø§ÙŠØ©", i:"fa-shield"},
                {n:"Ø¨Ù†ÙˆÙƒ", i:"fa-building-columns"}, {n:"Ø³ÙØ±", i:"fa-plane"}, {n:"ØµØ­Ø©", i:"fa-heart-pulse"}, 
                {n:"ØªØ±Ø¬Ù…Ø©", i:"fa-language"}, {n:"Ù…Ø³Ø­ Ø¶ÙˆØ¦ÙŠ", i:"fa-qrcode"}, {n:"Ù…Ø¯ÙŠØ± Ù…Ù„ÙØ§Øª", i:"fa-folder"},
                {n:"Ø¨ÙˆØµÙ„Ø©", i:"fa-compass"}, {n:"ØªØ³Ø¬ÙŠÙ„ ØµÙˆØª", i:"fa-microphone"}, {n:"ÙƒØ´Ø§Ù", i:"fa-flashlight"}, 
                {n:"Ù…ÙƒØ§Ù„Ù…Ø§Øª ÙÙŠØ¯ÙŠÙˆ", i:"fa-video"}, {n:"ØªÙˆØ§ØµÙ„ Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ", i:"fa-hashtag"}, {n:"Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ", i:"fa-envelope"},
                {n:"Ø¬Ù‡Ø§Øª Ø§ØªØµØ§Ù„", i:"fa-address-book"}, {n:"Ù‡Ø§ØªÙ", i:"fa-phone"}, {n:"Ø±Ø³Ø§Ø¦Ù„ Ù†ØµÙŠØ©", i:"fa-message"}, {n:"Ø¨Ø±ÙŠØ¯ ØµÙˆØªÙŠ", i:"fa-voicemail"}
            ]}
        };

        let players = 4, spies = 1, timerMinutes = 5;
        let scores = Array(10).fill(0);
        let currentWord = {}, currentCategoryName = "";
        let playerRoles = {}, viewOrder = [], currentPassIndex = 0;
        let timerInterval, timeLeft = 300, isPaused = false;

        function updateScoresUI() {
            const container = document.getElementById('scoresContainer');
            container.innerHTML = '';
            for(let i=0; i<players; i++) {
                container.innerHTML += `<div class="flex flex-col items-center p-2"><span class="text-xs text-gray-400">Ù„${i+1}</span><span class="text-[#2dd4bf]">${scores[i]}</span></div>`;
            }
        }

        function changeSettings(type, val) {
            if (type === 'players') {
                players = Math.max(3, Math.min(10, players + val));
                if (spies >= players) spies = Math.max(1, players - 2);
            } else if (type === 'spies') {
                spies = Math.max(1, Math.min(3, spies + val));
                if (spies >= players) spies = players - 1;
            }
            document.getElementById('playerCount').innerText = players;
            document.getElementById('spyCount').innerText = spies;
            updateScoresUI();
        }

        function setTimerOption(mins) {
            timerMinutes = mins;
            [3,5,7,10].forEach(m => {
                let btn = document.getElementById(`btn-t-${m}`);
                if(m === mins) {
                    btn.className = "btn-cyan py-2 rounded-lg font-bold";
                } else {
                    btn.className = "btn-dark py-2 rounded-lg font-bold";
                }
            });
        }

        function switchScreen(hideId, showId) {
            document.getElementById(hideId).classList.add('hidden-view');
            document.getElementById(showId).classList.remove('hidden-view');
        }

        function showCategories() {
            updateScoresUI();
            const container = document.getElementById('categories-container');
            container.innerHTML = '';
            for (let cat in database) {
                let btn = document.createElement('button');
                btn.className = 'bg-gray-900 border border-gray-700 py-4 rounded-xl text-md font-bold text-gray-300 flex flex-col items-center justify-center gap-2 transition-transform active:scale-95 hover:border-[#2dd4bf]';
                btn.innerHTML = `<i class="fa-solid ${database[cat].icon} text-2xl text-[#2dd4bf]"></i><span>${cat}</span>`;
                btn.onclick = () => startGame(cat);
                container.appendChild(btn);
            }
            switchScreen('setup-screen', 'category-screen');
        }

        function startGame(category) {
            let wordsArray = [];
            if(category === 'Ø¹Ø´ÙˆØ§Ø¦ÙŠ') {
                currentCategoryName = "Ø¹Ø´ÙˆØ§Ø¦ÙŠ";
                for(let cat in database) wordsArray = wordsArray.concat(database[cat].words);
            } else {
                currentCategoryName = category;
                wordsArray = database[category].words;
            }
            currentWord = wordsArray[Math.floor(Math.random() * wordsArray.length)];
            
            let rolesArray = Array(players).fill('Ù…ÙˆØ§Ø·Ù†');
            for (let i = 0; i < spies; i++) rolesArray[i] = 'Ø¬Ø§Ø³ÙˆØ³';
            rolesArray.sort(() => Math.random() - 0.5); 
            
            viewOrder = Array.from({length: players}, (_, i) => i + 1).sort(() => Math.random() - 0.5);
            playerRoles = {};
            for(let i=0; i<players; i++) playerRoles[viewOrder[i]] = rolesArray[i];
            
            currentPassIndex = 0;
            updatePassScreen();
            switchScreen('category-screen', 'pass-screen');
        }

        function updatePassScreen() {
            document.getElementById('currentPlayerNumDisplay').innerText = viewOrder[currentPassIndex];
            document.getElementById('totalPlayersDisplay').innerText = players;
        }

        function showCard() {
            const content = document.getElementById('cardContent');
            const actualPlayerNum = viewOrder[currentPassIndex];
            const role = playerRoles[actualPlayerNum];

            if (role === 'Ø¬Ø§Ø³ÙˆØ³') {
                content.innerHTML = `
                    <h3 class="text-white text-xl font-bold mb-8 tracking-widest">Ø£Ù†Øª Ø¬Ø§Ø³ÙˆØ³</h3>
                    <i class="fa-solid fa-user-secret icon-massive text-white mb-8 spy-mask"></i>
                    <p class="text-gray-400 text-lg">Ø§Ø¹Ù…Ù„ ÙƒØ£Ù†Ùƒ Ø¹Ø§Ø±Ù</p>
                `;
            } else {
                content.innerHTML = `
                    <h3 class="text-[#2dd4bf] text-xl font-bold mb-4 tracking-widest">Ø£Ù†Øª Ù…Ø´ Ø¬Ø§Ø³ÙˆØ³</h3>
                    <p class="text-gray-400 text-sm mb-6">Ø§Ù„Ù‚Ø³Ù…: ${currentCategoryName}</p>
                    <i class="fa-solid ${currentWord.i} icon-massive text-gray-200 mb-6 drop-shadow-md"></i>
                    <h2 class="text-3xl font-black text-white">${currentWord.n}</h2>
                `;
            }
            switchScreen('pass
